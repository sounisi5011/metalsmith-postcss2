// Type definitions for metalsmith-sass 1.6.0
// Project: https://github.com/stevenschobert/metalsmith-sass
// Definitions by: sounisi5011 <https://github.com/sounisi5011>

import Metalsmith from 'metalsmith';

/**
 * @see https://github.com/sass/node-sass/tree/v4.12.0#options
 */
declare interface LibSassOptions {
    file?: string;
    data?: string;
    importer?: LibSassImporter | LibSassImporter[];
    functions?: Record<string, Function>;
    includePaths?: string[];
    indentedSyntax?: boolean;
    indentType?: string;
    indentWidth?: number;
    linefeed?: string;
    omitSourceMapUrl?: boolean;
    outFile?: string | null;
    outputStyle?: 'nested' | 'expanded' | 'compact' | 'compressed';
    precision?: number;
    sourceComments?: boolean;
    sourceMap?: boolean | string | undefined;
    sourceMapContents?: boolean;
    sourceMapEmbed?: boolean;
    sourceMapRoot?: string;
}

declare type LibSassImporter = (
    url: string,
    prev: string,
    done: (
        obj:
            | { file: string }
            | { contents: string }
            | { file: string; contents: string },
    ) => void,
) => void;

declare interface Options extends Omit<LibSassOptions, 'data' | 'file'> {
    outputDir?: ((dirname: string) => string) | string;
}

declare function plugin(options: Options): Metalsmith.Plugin;

export = plugin;
